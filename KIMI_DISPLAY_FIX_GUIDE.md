# Kimiæ˜¾ç¤ºä¿®å¤æŒ‡å—

## é—®é¢˜åˆ†æ

### é—®é¢˜æè¿°
- Kimiå·²é…ç½®APIå¯†é’¥ï¼Œä½†æ²¡æœ‰æ˜¾ç¤ºåœ¨çµåŠ¨å²›å¤åˆ¶æ–‡æœ¬ç•Œé¢
- å…¶ä»–å·²é…ç½®APIå¯†é’¥çš„AIæœåŠ¡ï¼ˆå¦‚DeepSeekã€æ™ºè°±AIï¼‰æ­£å¸¸æ˜¾ç¤º

### æ ¹æœ¬åŸå› 
- çµåŠ¨å²›æœåŠ¡ä¸­ä½¿ç”¨ `settingsManager.getString(apiKeyName, "")` è·å–APIå¯†é’¥
- å¯¹äºKimiï¼Œåº”è¯¥ä½¿ç”¨ `settingsManager.getKimiApiKey()` æ–¹æ³•
- APIå¯†é’¥è·å–æ–¹æ³•ä¸åŒ¹é…å¯¼è‡´Kimiè¢«è¯¯åˆ¤ä¸ºæœªé…ç½®

## ä¿®å¤å†…å®¹

### 1. ä¿®å¤APIå¯†é’¥è·å–æ–¹æ³•
**æ–‡ä»¶**: `DynamicIslandService.kt`
```kotlin
// ä¿®å¤å‰ï¼šä½¿ç”¨é€šç”¨æ–¹æ³•è·å–APIå¯†é’¥
val apiKey = settingsManager.getString(apiKeyName, "") ?: ""

// ä¿®å¤åï¼šä½¿ç”¨ä¸“é—¨çš„APIå¯†é’¥è·å–æ–¹æ³•
val apiKey = when (displayName) {
    "DeepSeek" -> settingsManager.getDeepSeekApiKey()
    "ChatGPT" -> settingsManager.getString("chatgpt_api_key", "") ?: ""
    "Claude" -> settingsManager.getString("claude_api_key", "") ?: ""
    "Gemini" -> settingsManager.getGeminiApiKey()
    "æ™ºè°±AI" -> settingsManager.getString("zhipu_ai_api_key", "") ?: ""
    "é€šä¹‰åƒé—®" -> settingsManager.getQianwenApiKey()
    "æ–‡å¿ƒä¸€è¨€" -> settingsManager.getWenxinApiKey()
    "è®¯é£æ˜Ÿç«" -> settingsManager.getString("xinghuo_api_key", "") ?: ""
    "Kimi" -> settingsManager.getKimiApiKey()  // ä½¿ç”¨ä¸“é—¨çš„Kimiæ–¹æ³•
    else -> settingsManager.getString(apiKeyName, "") ?: ""
}
```

### 2. å¢å¼ºè°ƒè¯•æ—¥å¿—
**æ–‡ä»¶**: `DynamicIslandService.kt`
```kotlin
Log.d(TAG, "æ£€æŸ¥ $displayName APIå¯†é’¥: ${if (apiKey.isNotBlank()) "å·²é…ç½® (${apiKey.length}å­—ç¬¦)" else "æœªé…ç½®"}")
```

## æµ‹è¯•æ­¥éª¤

### æ­¥éª¤1ï¼šæ£€æŸ¥Kimi APIå¯†é’¥é…ç½®

#### 1.1 æŸ¥çœ‹è®¾ç½®ä¸­çš„Kimié…ç½®
1. **æ‰“å¼€åº”ç”¨è®¾ç½®**
2. **è¿›å…¥AIå¼•æ“é…ç½®**
3. **æ£€æŸ¥Kimiæ˜¯å¦å·²å¯ç”¨**
4. **æ£€æŸ¥Kimi APIå¯†é’¥æ˜¯å¦å·²é…ç½®**

#### 1.2 æŸ¥çœ‹æ—¥å¿—ç¡®è®¤Kimié…ç½®çŠ¶æ€
```bash
adb logcat | grep -E "(æ£€æŸ¥ Kimi|Kimi APIå¯†é’¥)"
```
åº”è¯¥æ˜¾ç¤ºï¼š
```
DynamicIslandService: æ£€æŸ¥ Kimi APIå¯†é’¥: å·²é…ç½® (32å­—ç¬¦)
DynamicIslandService: âœ… Kimi APIå¯†é’¥å·²é…ç½®ï¼Œæ·»åŠ åˆ°å¯ç”¨åˆ—è¡¨
```

### æ­¥éª¤2ï¼šæµ‹è¯•çµåŠ¨å²›Kimiæ˜¾ç¤º

#### 2.1 å¤åˆ¶æ–‡æœ¬æ¿€æ´»çµåŠ¨å²›
1. **å¤åˆ¶ä»»æ„æ–‡æœ¬**ï¼š"æµ‹è¯•Kimiæ˜¾ç¤º"
2. **ç­‰å¾…çµåŠ¨å²›è‡ªåŠ¨å±•å¼€**
3. **ç‚¹å‡»AIæŒ‰é’®**

#### 2.2 éªŒè¯Kimiæ ‡ç­¾æ˜¾ç¤º
**é¢„æœŸç»“æœ**ï¼š
- âœ… Kimiæ ‡ç­¾åº”è¯¥æ˜¾ç¤ºåœ¨AIæœåŠ¡åˆ—è¡¨ä¸­
- âœ… å¦‚æœKimiæ˜¯å½“å‰é€‰æ‹©çš„AIï¼Œåº”è¯¥æ˜¾ç¤º"âœ“ Kimi"
- âœ… å¦‚æœKimiä¸æ˜¯å½“å‰é€‰æ‹©çš„AIï¼Œåº”è¯¥æ˜¾ç¤º"Kimi"
- âœ… å¯ä»¥ç‚¹å‡»Kimiæ ‡ç­¾åˆ‡æ¢AIæœåŠ¡

#### 2.3 æŸ¥çœ‹æ—¥å¿—ç¡®è®¤
```bash
adb logcat | grep "æœ€ç»ˆé…ç½®å¥½çš„AIæœåŠ¡"
```
åº”è¯¥æ˜¾ç¤ºï¼š
```
DynamicIslandService: æœ€ç»ˆé…ç½®å¥½çš„AIæœåŠ¡: [DeepSeek, æ™ºè°±AI, Kimi]
```

### æ­¥éª¤3ï¼šæµ‹è¯•KimiåŠŸèƒ½

#### 3.1 é€‰æ‹©KimiæœåŠ¡
1. **ç‚¹å‡»Kimiæ ‡ç­¾**
2. **ç­‰å¾…AIå›å¤ç”Ÿæˆ**
3. **æŸ¥çœ‹å›å¤å†…å®¹**

#### 3.2 éªŒè¯KimiåŠŸèƒ½
**é¢„æœŸç»“æœ**ï¼š
- âœ… æˆåŠŸåˆ‡æ¢åˆ°KimiæœåŠ¡
- âœ… Kimiæ ‡ç­¾æ˜¾ç¤º"âœ“ Kimi"çŠ¶æ€
- âœ… ç”ŸæˆKimié£æ ¼çš„å›å¤å†…å®¹
- âœ… æ•°æ®æ­£ç¡®ä¿å­˜åˆ°èŠå¤©å†å²

#### 3.3 æŸ¥çœ‹æ—¥å¿—ç¡®è®¤
```bash
adb logcat | grep -E "(ç”¨æˆ·ç‚¹å‡»AIæ ‡ç­¾.*Kimi|åˆ‡æ¢åˆ°AIæœåŠ¡.*Kimi)"
```
åº”è¯¥æ˜¾ç¤ºï¼š
```
DynamicIslandService: ç”¨æˆ·ç‚¹å‡»AIæ ‡ç­¾: Kimi
DynamicIslandService: åˆ‡æ¢åˆ°AIæœåŠ¡: Kimi
```

### æ­¥éª¤4ï¼šæµ‹è¯•Kimi APIå¯†é’¥éªŒè¯

#### 4.1 æµ‹è¯•æœ‰æ•ˆKimi APIå¯†é’¥
- **æœ‰æ•ˆæ ¼å¼**ï¼š`sk-1234567890abcdef1234567890abcdef12345678`
- **é¢„æœŸç»“æœ**ï¼šKimiæ ‡ç­¾æ˜¾ç¤ºï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨

#### 4.2 æµ‹è¯•æ— æ•ˆKimi APIå¯†é’¥
- **æ— æ•ˆæ ¼å¼**ï¼š`invalid-key`ã€`sk-123`ã€ç©ºå­—ç¬¦ä¸²
- **é¢„æœŸç»“æœ**ï¼šKimiæ ‡ç­¾ä¸æ˜¾ç¤º

#### 4.3 æµ‹è¯•Kimi APIå¯†é’¥é•¿åº¦
- **æœ‰æ•ˆé•¿åº¦**ï¼šâ‰¥10å­—ç¬¦
- **æ— æ•ˆé•¿åº¦**ï¼š<10å­—ç¬¦
- **é¢„æœŸç»“æœ**ï¼šåªæœ‰æœ‰æ•ˆé•¿åº¦çš„APIå¯†é’¥æ‰ä¼šæ˜¾ç¤ºKimi

### æ­¥éª¤5ï¼šæµ‹è¯•Kimiä¸å…¶ä»–AIçš„äº¤äº’

#### 5.1 æµ‹è¯•Kimiåˆ‡æ¢
1. **ä»å…¶ä»–AIåˆ‡æ¢åˆ°Kimi**
2. **ä»Kimiåˆ‡æ¢åˆ°å…¶ä»–AI**
3. **éªŒè¯åˆ‡æ¢è¿‡ç¨‹**

#### 5.2 éªŒè¯KimiçŠ¶æ€ä¿æŒ
1. **é€‰æ‹©Kimiåå…³é—­çµåŠ¨å²›**
2. **é‡æ–°å¤åˆ¶æ–‡æœ¬æ¿€æ´»çµåŠ¨å²›**
3. **éªŒè¯Kimiæ˜¯å¦ä»ç„¶æ˜¯å½“å‰é€‰æ‹©çš„AI**

## é¢„æœŸç»“æœ

ä¿®å¤åï¼ŒçµåŠ¨å²›åº”è¯¥ï¼š

### âœ… æ­£ç¡®æ˜¾ç¤ºKimi
- Kimiæ ‡ç­¾å‡ºç°åœ¨AIæœåŠ¡åˆ—è¡¨ä¸­
- æ˜¾ç¤ºçŠ¶æ€ä¸å…¶ä»–AIæœåŠ¡ä¸€è‡´
- å¯ä»¥æ­£å¸¸ç‚¹å‡»åˆ‡æ¢

### âœ… æ­£ç¡®çš„APIå¯†é’¥éªŒè¯
- ä½¿ç”¨æ­£ç¡®çš„APIå¯†é’¥è·å–æ–¹æ³•
- éªŒè¯Kimi APIå¯†é’¥æ ¼å¼å’Œé•¿åº¦
- æä¾›è¯¦ç»†çš„è°ƒè¯•æ—¥å¿—

### âœ… ç¨³å®šçš„KimiåŠŸèƒ½
- å¯ä»¥æ­£å¸¸åˆ‡æ¢åˆ°KimiæœåŠ¡
- ç”ŸæˆKimié£æ ¼çš„å›å¤å†…å®¹
- æ•°æ®æ­£ç¡®ä¿å­˜å’ŒåŒæ­¥

### âœ… ä¸€è‡´çš„ç”¨æˆ·ä½“éªŒ
- Kimiä¸å…¶ä»–AIæœåŠ¡è¡Œä¸ºä¸€è‡´
- åˆ‡æ¢é€»è¾‘æ­£ç¡®
- é”™è¯¯å¤„ç†å®Œå–„

## æ•…éšœæ’é™¤

### é—®é¢˜1ï¼šKimiä»ç„¶ä¸æ˜¾ç¤º
**å¯èƒ½åŸå› **ï¼š
- Kimiæ²¡æœ‰åœ¨è®¾ç½®ä¸­å¯ç”¨
- Kimi APIå¯†é’¥æ ¼å¼ä¸æ­£ç¡®
- APIå¯†é’¥è·å–æ–¹æ³•ä»æœ‰é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥è®¾ç½®ä¸­Kimiæ˜¯å¦å¯ç”¨
2. éªŒè¯Kimi APIå¯†é’¥æ ¼å¼
3. æŸ¥çœ‹æ—¥å¿—ä¸­çš„APIå¯†é’¥æ£€æŸ¥ä¿¡æ¯

### é—®é¢˜2ï¼šKimiæ˜¾ç¤ºä½†æ— æ³•ä½¿ç”¨
**å¯èƒ½åŸå› **ï¼š
- APIå¯†é’¥æ— æ•ˆ
- ç½‘ç»œè¿æ¥é—®é¢˜
- AIæœåŠ¡æ˜ å°„é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥Kimi APIå¯†é’¥æœ‰æ•ˆæ€§
2. æµ‹è¯•ç½‘ç»œè¿æ¥
3. éªŒè¯AIæœåŠ¡ç±»å‹æ˜ å°„

### é—®é¢˜3ï¼šKimiåˆ‡æ¢æ— æ•ˆ
**å¯èƒ½åŸå› **ï¼š
- åˆ‡æ¢é€»è¾‘æœ‰é—®é¢˜
- UIæ›´æ–°ä¸æ­£ç¡®

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥switchToAIServiceæ–¹æ³•
2. éªŒè¯UIæ›´æ–°é€»è¾‘
3. æŸ¥çœ‹åˆ‡æ¢æ—¥å¿—

## è°ƒè¯•å‘½ä»¤

```bash
# æŸ¥çœ‹Kimi APIå¯†é’¥æ£€æŸ¥
adb logcat | grep "æ£€æŸ¥ Kimi"

# æŸ¥çœ‹Kimié…ç½®çŠ¶æ€
adb logcat | grep -E "(Kimi APIå¯†é’¥|Kimi.*å·²é…ç½®|Kimi.*æœªé…ç½®)"

# æŸ¥çœ‹æœ€ç»ˆAIæœåŠ¡åˆ—è¡¨
adb logcat | grep "æœ€ç»ˆé…ç½®å¥½çš„AIæœåŠ¡"

# æŸ¥çœ‹Kimiæ ‡ç­¾ç‚¹å‡»
adb logcat | grep "ç”¨æˆ·ç‚¹å‡»AIæ ‡ç­¾.*Kimi"

# æŸ¥çœ‹KimiæœåŠ¡åˆ‡æ¢
adb logcat | grep "åˆ‡æ¢åˆ°AIæœåŠ¡.*Kimi"
```

## ç»“è®º

é€šè¿‡ä¿®å¤APIå¯†é’¥è·å–æ–¹æ³•ï¼ŒKimiç°åœ¨åº”è¯¥èƒ½å¤Ÿï¼š

1. **æ­£ç¡®æ˜¾ç¤ºåœ¨çµåŠ¨å²›ç•Œé¢**ï¼šä½¿ç”¨æ­£ç¡®çš„APIå¯†é’¥è·å–æ–¹æ³•
2. **é€šè¿‡APIå¯†é’¥éªŒè¯**ï¼šéªŒè¯Kimi APIå¯†é’¥æ ¼å¼å’Œæœ‰æ•ˆæ€§
3. **æä¾›ç¨³å®šçš„åŠŸèƒ½**ï¼šå¯ä»¥æ­£å¸¸åˆ‡æ¢å’Œä½¿ç”¨KimiæœåŠ¡
4. **ä¿æŒä¸€è‡´çš„ä½“éªŒ**ï¼šä¸å…¶ä»–AIæœåŠ¡è¡Œä¸ºå®Œå…¨ä¸€è‡´

ä¿®å¤åï¼ŒKimiå°†æ­£ç¡®æ˜¾ç¤ºåœ¨çµåŠ¨å²›å¤åˆ¶æ–‡æœ¬ç•Œé¢ä¸­ï¼ğŸ‰

