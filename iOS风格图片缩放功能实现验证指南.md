# iOSé£æ ¼å›¾ç‰‡ç¼©æ”¾åŠŸèƒ½å®ç°éªŒè¯æŒ‡å—

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

é‡æ–°å®ç°äº†å›¾ç‰‡æŸ¥çœ‹å™¨çš„ç¼©æ”¾åŠŸèƒ½ï¼Œå‚è€ƒiOSçš„äº¤äº’ä½“éªŒï¼Œå®ç°ä»¥ç”¨æˆ·æ‰‹æŒ‡ä½ç½®ä¸ºä¸­å¿ƒçš„ç¼©æ”¾ï¼Œæä¾›æ›´åŠ è‡ªç„¶å’Œç›´è§‚çš„å›¾ç‰‡æµè§ˆä½“éªŒã€‚

## ğŸ› ï¸ æŠ€æœ¯å®ç°

### 1. iOSé£æ ¼çš„ç¼©æ”¾ç®—æ³•

#### æ ¸å¿ƒç¼©æ”¾é€»è¾‘
```kotlin
private fun handleTouch(event: MotionEvent): Boolean {
    when (event.action and MotionEvent.ACTION_MASK) {
        MotionEvent.ACTION_POINTER_DOWN -> {
            // åŒæŒ‡è§¦æ‘¸å¼€å§‹
            initialDistance = getDistance(event)
            initialScale = currentScale
            initialFocusX = (event.getX(0) + event.getX(1)) / 2f
            initialFocusY = (event.getY(0) + event.getY(1)) / 2f
            isZooming = true
        }
        MotionEvent.ACTION_MOVE -> {
            if (isZooming && event.pointerCount == 2) {
                // åŒæŒ‡ç¼©æ”¾
                val currentDistance = getDistance(event)
                val scaleFactor = currentDistance / initialDistance
                val newScale = initialScale * scaleFactor
                
                // é™åˆ¶ç¼©æ”¾èŒƒå›´
                val clampedScale = newScale.coerceIn(minScale, maxScale)
                
                // è®¡ç®—ç¼©æ”¾ä¸­å¿ƒç‚¹
                val currentFocusX = (event.getX(0) + event.getX(1)) / 2f
                val currentFocusY = (event.getY(0) + event.getY(1)) / 2f
                
                // ä»¥æ‰‹æŒ‡ä¸­å¿ƒä¸ºç¼©æ”¾ç‚¹
                matrix.postScale(clampedScale / currentScale, clampedScale / currentScale, currentFocusX, currentFocusY)
                currentScale = clampedScale
                
                imageView.imageMatrix = matrix
            }
        }
    }
    return true
}
```

#### è·ç¦»è®¡ç®—
```kotlin
private fun getDistance(event: MotionEvent): Float {
    val dx = event.getX(0) - event.getX(1)
    val dy = event.getY(0) - event.getY(1)
    return kotlin.math.sqrt((dx * dx + dy * dy).toDouble()).toFloat()
}
```

### 2. æ™ºèƒ½è¾¹ç•Œå¤„ç†

#### è¾¹ç•Œæ£€æŸ¥ç®—æ³•
```kotlin
private fun checkBounds() {
    val drawable = imageView.drawable ?: return
    val drawableWidth = drawable.intrinsicWidth
    val drawableHeight = drawable.intrinsicHeight
    val viewWidth = imageView.width
    val viewHeight = imageView.height
    
    val scaledWidth = drawableWidth * currentScale
    val scaledHeight = drawableHeight * currentScale
    
    val values = FloatArray(9)
    matrix.getValues(values)
    val translateX = values[Matrix.MTRANS_X]
    val translateY = values[Matrix.MTRANS_Y]
    
    var newTranslateX = translateX
    var newTranslateY = translateY
    
    // æ°´å¹³è¾¹ç•Œæ£€æŸ¥
    if (scaledWidth <= viewWidth) {
        // å›¾ç‰‡å®½åº¦å°äºè§†å›¾å®½åº¦ï¼Œå±…ä¸­æ˜¾ç¤º
        newTranslateX = (viewWidth - scaledWidth) / 2f
    } else {
        // å›¾ç‰‡å®½åº¦å¤§äºè§†å›¾å®½åº¦ï¼Œé™åˆ¶æ‹–æ‹½èŒƒå›´
        val maxTranslateX = 0f
        val minTranslateX = viewWidth - scaledWidth
        newTranslateX = newTranslateX.coerceIn(minTranslateX, maxTranslateX)
    }
    
    // å‚ç›´è¾¹ç•Œæ£€æŸ¥
    if (scaledHeight <= viewHeight) {
        // å›¾ç‰‡é«˜åº¦å°äºè§†å›¾é«˜åº¦ï¼Œå±…ä¸­æ˜¾ç¤º
        newTranslateY = (viewHeight - scaledHeight) / 2f
    } else {
        // å›¾ç‰‡é«˜åº¦å¤§äºè§†å›¾é«˜åº¦ï¼Œé™åˆ¶æ‹–æ‹½èŒƒå›´
        val maxTranslateY = 0f
        val minTranslateY = viewHeight - scaledHeight
        newTranslateY = newTranslateY.coerceIn(minTranslateY, maxTranslateY)
    }
    
    // åº”ç”¨è¾¹ç•Œä¿®æ­£
    if (newTranslateX != translateX || newTranslateY != translateY) {
        matrix.postTranslate(newTranslateX - translateX, newTranslateY - translateY)
        imageView.imageMatrix = matrix
    }
}
```

## âœ… åŠŸèƒ½ç‰¹æ€§

### iOSé£æ ¼ç¼©æ”¾ä½“éªŒ
- âœ… **æ‰‹æŒ‡ä¸­å¿ƒç¼©æ”¾**ï¼šä»¥åŒæŒ‡ä¸­å¿ƒç‚¹ä¸ºç¼©æ”¾ä¸­å¿ƒï¼Œè€Œä¸æ˜¯å›¾ç‰‡ä¸­å¿ƒ
- âœ… **å®æ—¶ç¼©æ”¾**ï¼šè·Ÿéšæ‰‹æŒ‡ç§»åŠ¨å®æ—¶ç¼©æ”¾ï¼Œå“åº”æµç•…
- âœ… **ç¼©æ”¾èŒƒå›´é™åˆ¶**ï¼š0.5xåˆ°5xçš„åˆç†ç¼©æ”¾èŒƒå›´
- âœ… **å¹³æ»‘è¿‡æ¸¡**ï¼šç¼©æ”¾è¿‡ç¨‹å¹³æ»‘è‡ªç„¶ï¼Œæ— å¡é¡¿

### æ™ºèƒ½æ‹–æ‹½åŠŸèƒ½
- âœ… **å•æŒ‡æ‹–æ‹½**ï¼šå•æŒ‡å¯ä»¥è‡ªç”±æ‹–æ‹½å›¾ç‰‡
- âœ… **è¾¹ç•Œé™åˆ¶**ï¼šé˜²æ­¢æ‹–æ‹½è¶…å‡ºåˆç†èŒƒå›´
- âœ… **è‡ªåŠ¨å±…ä¸­**ï¼šå°å›¾ç‰‡è‡ªåŠ¨å±…ä¸­æ˜¾ç¤º
- âœ… **æƒ¯æ€§å¤„ç†**ï¼šæ‹–æ‹½ç»“æŸåè‡ªåŠ¨è°ƒæ•´åˆ°è¾¹ç•Œå†…

### æ‰‹åŠ¿è¯†åˆ«ä¼˜åŒ–
- âœ… **å¤šç‚¹è§¦æ§**ï¼šæ­£ç¡®å¤„ç†åŒæŒ‡å’Œå•æŒ‡æ“ä½œ
- âœ… **çŠ¶æ€ç®¡ç†**ï¼šå‡†ç¡®è¯†åˆ«ç¼©æ”¾å’Œæ‹–æ‹½çŠ¶æ€
- âœ… **å†²çªé¿å…**ï¼šç¼©æ”¾å’Œæ‹–æ‹½ä¸ä¼šç›¸äº’å¹²æ‰°
- âœ… **å“åº”åŠæ—¶**ï¼šæ‰‹åŠ¿è¯†åˆ«å“åº”è¿…é€Ÿ

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### æµ‹è¯•1: iOSé£æ ¼ç¼©æ”¾ä½“éªŒ

#### 1.1 æ‰‹æŒ‡ä¸­å¿ƒç¼©æ”¾æµ‹è¯•
1. æ‰“å¼€ä¸€å¼ å›¾ç‰‡
2. å°†åŒæŒ‡æ”¾åœ¨å›¾ç‰‡çš„ä»»æ„ä½ç½®
3. è¿›è¡Œç¼©æ”¾æ“ä½œï¼ˆæåˆ/å±•å¼€ï¼‰
4. **é¢„æœŸç»“æœ**: 
   - å›¾ç‰‡ä»¥åŒæŒ‡ä¸­å¿ƒç‚¹ä¸ºç¼©æ”¾ä¸­å¿ƒ
   - ç¼©æ”¾è¿‡ç¨‹æµç•…è‡ªç„¶
   - ç¼©æ”¾èŒƒå›´åœ¨0.5x-5xä¹‹é—´

#### 1.2 ä¸åŒä½ç½®ç¼©æ”¾æµ‹è¯•
1. åœ¨å›¾ç‰‡å·¦ä¸Šè§’è¿›è¡Œç¼©æ”¾
2. åœ¨å›¾ç‰‡å³ä¸‹è§’è¿›è¡Œç¼©æ”¾
3. åœ¨å›¾ç‰‡ä¸­å¿ƒè¿›è¡Œç¼©æ”¾
4. **é¢„æœŸç»“æœ**: æ‰€æœ‰ä½ç½®éƒ½èƒ½æ­£ç¡®ä»¥æ‰‹æŒ‡ä¸­å¿ƒä¸ºç¼©æ”¾ç‚¹

#### 1.3 ç¼©æ”¾èŒƒå›´æµ‹è¯•
1. å°è¯•ç¼©æ”¾åˆ°æœ€å°ï¼ˆ0.5xï¼‰
2. å°è¯•ç¼©æ”¾åˆ°æœ€å¤§ï¼ˆ5xï¼‰
3. **é¢„æœŸç»“æœ**: 
   - æœ€å°ç¼©æ”¾ä¸ä¼šè¶…è¿‡0.5x
   - æœ€å¤§ç¼©æ”¾ä¸ä¼šè¶…è¿‡5x
   - è¾¹ç•Œå¤„ç†å¹³æ»‘

### æµ‹è¯•2: æ‹–æ‹½åŠŸèƒ½æµ‹è¯•

#### 2.1 å•æŒ‡æ‹–æ‹½æµ‹è¯•
1. ç¼©æ”¾å›¾ç‰‡åˆ°å¤§äºå±å¹•å°ºå¯¸
2. å•æŒ‡æ‹–æ‹½å›¾ç‰‡
3. **é¢„æœŸç»“æœ**: 
   - å›¾ç‰‡è·Ÿéšæ‰‹æŒ‡ç§»åŠ¨
   - æ‹–æ‹½æµç•…æ— å¡é¡¿
   - ä¸ä¼šæ‹–æ‹½è¶…å‡ºè¾¹ç•Œ

#### 2.2 è¾¹ç•Œå¤„ç†æµ‹è¯•
1. æ‹–æ‹½å›¾ç‰‡åˆ°å±å¹•è¾¹ç¼˜
2. ç»§ç»­å°è¯•æ‹–æ‹½
3. **é¢„æœŸç»“æœ**: 
   - å›¾ç‰‡ä¸ä¼šæ‹–æ‹½è¶…å‡ºå±å¹•è¾¹ç•Œ
   - è¾¹ç•Œå¤„ç†è‡ªç„¶
   - å°å›¾ç‰‡è‡ªåŠ¨å±…ä¸­

### æµ‹è¯•3: æ‰‹åŠ¿åˆ‡æ¢æµ‹è¯•

#### 3.1 ç¼©æ”¾è½¬æ‹–æ‹½æµ‹è¯•
1. åŒæŒ‡ç¼©æ”¾å›¾ç‰‡
2. æŠ¬èµ·ä¸€ä¸ªæ‰‹æŒ‡ï¼Œç»§ç»­å•æŒ‡æ‹–æ‹½
3. **é¢„æœŸç»“æœ**: 
   - æ‰‹åŠ¿åˆ‡æ¢è‡ªç„¶
   - æ²¡æœ‰å¼‚å¸¸çŠ¶æ€
   - æ“ä½œæµç•…

#### 3.2 æ‹–æ‹½è½¬ç¼©æ”¾æµ‹è¯•
1. å•æŒ‡æ‹–æ‹½å›¾ç‰‡
2. æ”¾ä¸‹ç¬¬äºŒä¸ªæ‰‹æŒ‡å¼€å§‹ç¼©æ”¾
3. **é¢„æœŸç»“æœ**: 
   - æ‰‹åŠ¿åˆ‡æ¢è‡ªç„¶
   - ç¼©æ”¾ä¸­å¿ƒæ­£ç¡®
   - æ“ä½œæµç•…

### æµ‹è¯•4: ä¸åŒå›¾ç‰‡å°ºå¯¸æµ‹è¯•

#### 4.1 å°å›¾ç‰‡æµ‹è¯•
1. æ‰“å¼€å°äºå±å¹•çš„å›¾ç‰‡
2. è¿›è¡Œç¼©æ”¾å’Œæ‹–æ‹½æ“ä½œ
3. **é¢„æœŸç»“æœ**: 
   - å›¾ç‰‡è‡ªåŠ¨å±…ä¸­
   - ç¼©æ”¾åŠŸèƒ½æ­£å¸¸
   - æ‹–æ‹½æœ‰åˆç†é™åˆ¶

#### 4.2 å¤§å›¾ç‰‡æµ‹è¯•
1. æ‰“å¼€å¤§äºå±å¹•çš„å›¾ç‰‡
2. è¿›è¡Œç¼©æ”¾å’Œæ‹–æ‹½æ“ä½œ
3. **é¢„æœŸç»“æœ**: 
   - åˆå§‹æ˜¾ç¤ºåˆé€‚å¤§å°
   - å¯ä»¥æ”¾å¤§æŸ¥çœ‹ç»†èŠ‚
   - æ‹–æ‹½èŒƒå›´åˆç†

#### 4.3 è¶…å®½å›¾ç‰‡æµ‹è¯•
1. æ‰“å¼€å®½é«˜æ¯”å¾ˆå¤§çš„å›¾ç‰‡
2. è¿›è¡Œç¼©æ”¾å’Œæ‹–æ‹½æ“ä½œ
3. **é¢„æœŸç»“æœ**: 
   - æ°´å¹³æ‹–æ‹½èŒƒå›´å¤§
   - å‚ç›´æ‹–æ‹½èŒƒå›´å°
   - è¾¹ç•Œå¤„ç†æ­£ç¡®

## ğŸ” éªŒè¯è¦ç‚¹

### ç¼©æ”¾ä½“éªŒéªŒè¯
- âœ… ç¼©æ”¾ä¸­å¿ƒè·Ÿéšæ‰‹æŒ‡ä½ç½®
- âœ… ç¼©æ”¾è¿‡ç¨‹æµç•…è‡ªç„¶
- âœ… ç¼©æ”¾èŒƒå›´åˆç†
- âœ… å“åº”é€Ÿåº¦åŠæ—¶

### æ‹–æ‹½ä½“éªŒéªŒè¯
- âœ… æ‹–æ‹½è·Ÿéšæ‰‹æŒ‡ç§»åŠ¨
- âœ… è¾¹ç•Œå¤„ç†è‡ªç„¶
- âœ… è‡ªåŠ¨å±…ä¸­åŠŸèƒ½æ­£å¸¸
- âœ… æƒ¯æ€§å¤„ç†åˆç†

### æ‰‹åŠ¿è¯†åˆ«éªŒè¯
- âœ… å¤šç‚¹è§¦æ§å¤„ç†æ­£ç¡®
- âœ… æ‰‹åŠ¿åˆ‡æ¢è‡ªç„¶
- âœ… çŠ¶æ€ç®¡ç†å‡†ç¡®
- âœ… æ— å†²çªå’Œå¼‚å¸¸

### æ€§èƒ½éªŒè¯
- âœ… æ“ä½œå“åº”åŠæ—¶
- âœ… æ— å¡é¡¿å’Œå»¶è¿Ÿ
- âœ… å†…å­˜ä½¿ç”¨æ­£å¸¸
- âœ… é•¿æ—¶é—´ä½¿ç”¨ç¨³å®š

## ğŸ“± æµ‹è¯•ç¯å¢ƒ

### è®¾å¤‡ç±»å‹
- **ä¸åŒå±å¹•å°ºå¯¸**: æ‰‹æœºã€å¹³æ¿
- **ä¸åŒåˆ†è¾¨ç‡**: HDã€FHDã€QHDã€4K
- **ä¸åŒå“ç‰Œ**: å°ç±³ã€åä¸ºã€OPPOã€vivoã€ä¸‰æ˜Ÿ

### å›¾ç‰‡ç±»å‹
- **ä¸åŒå°ºå¯¸**: å°å›¾ã€ä¸­å›¾ã€å¤§å›¾ã€è¶…å¤§å›¾
- **ä¸åŒæ¯”ä¾‹**: æ­£æ–¹å½¢ã€æ¨ªå‘ã€çºµå‘ã€è¶…å®½ã€è¶…é«˜
- **ä¸åŒæ ¼å¼**: JPGã€PNGã€GIFã€WebP

### Androidç‰ˆæœ¬
- **Android 9**: API 28
- **Android 10**: API 29
- **Android 11**: API 30
- **Android 12**: API 31
- **Android 13**: API 33
- **Android 14**: API 34

## ğŸ‰ å®ç°å®Œæˆ

iOSé£æ ¼çš„å›¾ç‰‡ç¼©æ”¾åŠŸèƒ½ç°åœ¨å·²ç»å®Œå…¨å®ç°ï¼š

- **æ‰‹æŒ‡ä¸­å¿ƒç¼©æ”¾**ï¼šä»¥åŒæŒ‡ä¸­å¿ƒç‚¹ä¸ºç¼©æ”¾ä¸­å¿ƒï¼Œæä¾›æ›´è‡ªç„¶çš„ç¼©æ”¾ä½“éªŒ
- **æ™ºèƒ½è¾¹ç•Œå¤„ç†**ï¼šé˜²æ­¢å›¾ç‰‡æ‹–æ‹½è¶…å‡ºåˆç†èŒƒå›´ï¼Œå°å›¾ç‰‡è‡ªåŠ¨å±…ä¸­
- **æµç•…æ‰‹åŠ¿è¯†åˆ«**ï¼šæ­£ç¡®å¤„ç†å¤šç‚¹è§¦æ§ï¼Œæ‰‹åŠ¿åˆ‡æ¢è‡ªç„¶
- **iOSçº§ä½“éªŒ**ï¼šç¼©æ”¾å’Œæ‹–æ‹½ä½“éªŒæ¥è¿‘iOSåŸç”Ÿç›¸å†Œ

ç”¨æˆ·ç°åœ¨å¯ä»¥äº«å—ä¸iOSç›¸å†Œç›¸åŒçº§åˆ«çš„å›¾ç‰‡æµè§ˆä½“éªŒã€‚
