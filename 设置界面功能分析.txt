╔══════════════════════════════════════════════════════════════════════════════╗
║                    设置界面功能结构分析 (ASCII 图表)                          ║
╚══════════════════════════════════════════════════════════════════════════════╝

┌─────────────────────────────────────────────────────────────────────────────┐
│                          设置界面 (SettingsActivity)                         │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                    ┌───────────────┴───────────────┐
                    │                               │
            ┌───────▼───────┐              ┌────────▼────────┐
            │   搜索功能    │              │   设置分类      │
            │  (SearchView) │              │  (Categories)   │
            └───────────────┘              └─────────────────┘
                                                    │
        ┌───────────────────────────────────────────┼───────────────────────────┐
        │                                           │                           │
        ▼                                           ▼                           ▼
┌───────────────┐                        ┌───────────────┐          ┌───────────────┐
│   1. 通用     │                        │  2. 悬浮球     │          │  3. 灵动岛     │
│  (General)    │                        │(Floating Ball) │          │(Dynamic Island)│
└───────────────┘                        └───────────────┘          └───────────────┘
        │                                           │                           │
        ├─ 显示模式 (浮动球/灵动岛/简易模式)         ├─ 单击操作                  ├─ 单击操作
        ├─ 主题 (亮色/暗色/跟随系统)                ├─ 长按操作                  ├─ 长按操作
        ├─ 剪贴板监听                                ├─ 主菜单显示内容            ├─ 灵动岛位置
        ├─ 自动粘贴                                  ├─ 透明度 (20-100%)          ├─ 灵动岛宽度 (32-80)
        ├─ 查看搜索历史                              └─ 自动贴边隐藏              ├─ 透明度 (128-255)
        ├─ 左手模式                                                              ├─ 增强版布局
        ├─ 新手入门指南                                                          ├─ 启用通知监听
        └─ 权限管理                                                              ├─ 通知应用管理
                                                                                └─ 测试通知功能

        ┌───────────────────────────────────────────────────────────────────────┐
        │                                                                       │
        ▼                                                                       ▼
┌───────────────┐                        ┌───────────────┐          ┌───────────────┐
│  4. 简易模式  │                        │  5. 浏览器与搜索│          │  6. AI 助手   │
│(Simple Mode)  │                        │(Browser&Search)│          │(AI Assistant) │
└───────────────┘                        └───────────────┘          └───────────────┘
        │                                           │                           │
        ├─ 简易模式动作                              ├─ 多窗口浏览器              ├─ 默认AI搜索模式
        ├─ 自动启动简易模式                          │   ├─ 默认窗口数 (1-4)      ├─ 主提示词设置
        └─ 悬浮窗显示                                │   ├─ 窗口1引擎             ├─ AI API设置
                                                    │   ├─ 窗口2引擎             │   ├─ ChatGPT
                                                    │   ├─ 窗口3引擎             │   ├─ Claude
                                                    │   └─ 恢复窗口位置          │   ├─ Gemini
                                                                                │   ├─ 文心一言
                                                                                │   ├─ DeepSeek
                                                                                │   ├─ 通义千问
                                                                                │   ├─ 讯飞星火
                                                                                │   ├─ Kimi
                                                                                │   ├─ 智谱AI
                                                                                │   └─ 临时专线

        ┌───────────────────────────────────────────────────────────────────────┐
        │                                                                       │
        ▼                                                                       ▼
┌───────────────┐                        ┌───────────────┐
│  7. 搜索引擎  │                        │   8. 关于     │
│(Search Engine)│                        │   (About)      │
└───────────────┘                        └───────────────┘
        │                                           │
        ├─ 网页搜索引擎管理                           ├─ 检查更新
        │   ├─ 分类管理                              ├─ 评分与评价
        │   ├─ 排序功能                              ├─ 反馈与建议
        │   ├─ 增删改                                └─ 隐私政策
        │   └─ 导入导出
        ├─ AI搜索引擎管理
        └─ 应用内搜索管理

╔══════════════════════════════════════════════════════════════════════════════╗
║                          详细功能列表                                        ║
╚══════════════════════════════════════════════════════════════════════════════╝

┌─────────────────────────────────────────────────────────────────────────────┐
│ 1. 通用设置 (General Settings)                                             │
├─────────────────────────────────────────────────────────────────────────────┤
│  • 显示模式 (display_mode)                                                  │
│    └─ 选项: 悬浮球 / 灵动岛 / 简易模式                                       │
│  • 主题 (theme_mode)                                                        │
│    └─ 选项: 亮色模式 / 暗色模式 / 跟随系统                                    │
│  • 剪贴板监听 (clipboard_listener) [开关]                                  │
│    └─ 自动检测剪贴板内容并弹出搜索提示                                        │
│  • 自动粘贴 (auto_paste) [开关]                                             │
│    └─ 打开搜索界面时自动粘贴剪贴板内容                                        │
│  • 查看搜索历史 (view_search_history) [跳转]                                 │
│    └─ 管理搜索记录                                                           │
│  • 左手模式 (left_handed_mode) [开关]                                       │
│    └─ 调整界面布局适合左手操作                                                │
│  • 新手入门指南 (onboarding_guide) [跳转]                                    │
│    └─ 查看应用主要功能使用方法                                                │
│  • 权限管理 (permission_management) [跳转]                                   │
│    └─ 检查和管理应用所需权限                                                  │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│ 2. 悬浮球设置 (Floating Ball Settings)                                      │
├─────────────────────────────────────────────────────────────────────────────┤
│  • 单击操作 (action_ball_click) [列表]                                       │
│    └─ 设置单击悬浮球触发的操作                                                │
│  • 长按操作 (action_ball_long_press) [列表]                                  │
│    └─ 设置长按悬浮球触发的操作                                                │
│  • 主菜单显示内容 (floating_window_display_mode) [多选]                     │
│    └─ 选择在悬浮菜单中显示的搜索模块                                           │
│  • 透明度 (ball_alpha) [滑动条: 20-100%]                                     │
│    └─ 调整悬浮球透明度                                                        │
│  • 自动贴边隐藏 (auto_hide) [开关]                                           │
│    └─ 无操作后自动贴边半透明隐藏                                               │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│ 3. 灵动岛设置 (Dynamic Island Settings)                                     │
├─────────────────────────────────────────────────────────────────────────────┤
│  • 单击操作 (action_island_click) [列表]                                     │
│    └─ 设置单击灵动岛触发的操作                                                │
│  • 长按操作 (action_island_long_press) [列表]                                │
│    └─ 设置长按灵动岛触发的操作                                                │
│  • 灵动岛位置 (island_position) [滑动条: 0-100%]                              │
│    └─ 调整灵动岛小横条的水平位置                                               │
│  • 灵动岛宽度 (island_width) [滑动条: 32-80]                                │
│    └─ 调整灵动岛小横条的宽度大小                                              │
│  • 灵动岛透明度 (island_alpha) [滑动条: 128-255]                              │
│    └─ 调整灵动岛小横条的透明度                                                │
│  • 增强版布局 (island_enhanced_layout) [开关]                                │
│    └─ 显示可交互按钮，支持长按弹出菜单                                         │
│  • 启用通知监听 (enable_notification_listener) [开关]                        │
│    └─ 允许应用读取通知以在灵动岛中显示                                         │
│  • 通知应用管理 (select_apps_for_notification) [跳转]                       │
│    └─ 选择哪些应用的通知可以在灵动岛中显示                                     │
│  • 测试通知功能 (test_notification) [按钮]                                   │
│    └─ 发送测试通知验证灵动岛通知显示功能                                       │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│ 4. 简易模式设置 (Simple Mode Settings)                                     │
├─────────────────────────────────────────────────────────────────────────────┤
│  • 简易模式动作 (simple_mode_action) [列表]                                  │
│    └─ 选择简易模式执行的动作                                                   │
│  • 自动启动简易模式 (simple_mode_auto_start) [开关]                          │
│    └─ 在剪贴板变化时自动启动简易模式                                           │
│  • 悬浮窗显示 (simple_mode_floating) [开关]                                  │
│    └─ 以悬浮窗形式显示简易模式                                                 │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│ 5. 浏览器与搜索设置 (Browser & Search Settings)                              │
├─────────────────────────────────────────────────────────────────────────────┤
│  • 多窗口浏览器                                                              │
│    ├─ 默认窗口数 (default_window_count) [列表: 1-4]                          │
│    │  └─ 设置多窗口搜索时默认显示的窗口数量                                    │
│    ├─ 窗口1引擎 (left_window_search_engine) [选择]                           │
│    │  └─ 设置第一个窗口默认使用的搜索引擎                                      │
│    ├─ 窗口2引擎 (center_window_search_engine) [选择]                         │
│    │  └─ 设置第二个窗口默认使用的搜索引擎                                      │
│    ├─ 窗口3引擎 (right_window_search_engine) [选择]                           │
│    │  └─ 设置第三个窗口默认使用的搜索引擎                                      │
│    └─ 恢复窗口位置 (reset_window_state) [按钮]                               │
│       └─ 重置多窗口模式下的窗口大小和位置                                      │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│ 6. AI 助手设置 (AI Assistant Settings)                                     │
├─────────────────────────────────────────────────────────────────────────────┤
│  • 默认AI搜索模式 (search_default_ai_mode) [开关]                            │
│    └─ 启用后默认使用AI搜索引擎进行搜索                                         │
│  • 主提示词设置 (master_prompt_settings) [跳转]                              │
│    └─ 配置AI的回复方式、口吻、角色背景信息                                    │
│  • AI API设置 (ai_api_settings) [跳转]                                      │
│    └─ 配置各种AI服务的API密钥和设置                                           │
│    │                                                                         │
│    ├─ ChatGPT API设置                                                        │
│    │  ├─ API密钥 (chatgpt_api_key)                                          │
│    │  └─ API地址 (chatgpt_api_url)                                          │
│    │                                                                         │
│    ├─ Claude API设置                                                         │
│    │  ├─ API密钥 (claude_api_key)                                           │
│    │  └─ API地址 (claude_api_url)                                           │
│    │                                                                         │
│    ├─ Gemini API设置                                                         │
│    │  ├─ API密钥 (gemini_api_key)                                           │
│    │  └─ API地址 (gemini_api_url)                                           │
│    │                                                                         │
│    ├─ 文心一言 API设置                                                       │
│    │  ├─ API密钥 (wenxin_api_key)                                           │
│    │  ├─ Secret密钥 (wenxin_secret_key)                                     │
│    │  └─ API地址 (wenxin_api_url)                                           │
│    │                                                                         │
│    ├─ DeepSeek API设置                                                       │
│    │  ├─ API密钥 (deepseek_api_key)                                         │
│    │  └─ API地址 (deepseek_api_url)                                         │
│    │                                                                         │
│    ├─ 通义千问 API设置                                                       │
│    │  ├─ API密钥 (qianwen_api_key)                                          │
│    │  └─ API地址 (qianwen_api_url)                                          │
│    │                                                                         │
│    ├─ 讯飞星火 API设置                                                       │
│    │  ├─ API密钥 (xinghuo_api_key)                                          │
│    │  └─ API地址 (xinghuo_api_url)                                          │
│    │                                                                         │
│    ├─ Kimi API设置                                                           │
│    │  ├─ API密钥 (kimi_api_key)                                              │
│    │  └─ API地址 (kimi_api_url)                                              │
│    │                                                                         │
│    ├─ 智谱AI API设置                                                         │
│    │  ├─ API密钥 (zhipu_ai_api_key)                                         │
│    │  └─ API地址 (zhipu_ai_api_url)                                         │
│    │                                                                         │
│    └─ 临时专线设置                                                           │
│       └─ API地址 (temp_service_api_url) [免费服务，无需密钥]                 │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│ 7. 搜索引擎设置 (Search Engine Settings)                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│  • 网页搜索引擎管理 (search_engine_settings) [跳转]                           │
│    └─ 功能: 分类、排序、增删改、导入导出                                       │
│  • AI搜索引擎管理 (ai_search_engine_settings) [跳转]                         │
│    └─ 管理AI对话平台和AI搜索引擎                                               │
│  • 应用内搜索管理 (app_search_settings) [跳转]                               │
│    └─ 启用和排序可在简易模式中搜索的应用                                       │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│ 8. 关于 (About)                                                            │
├─────────────────────────────────────────────────────────────────────────────┤
│  • 检查更新 (check_for_updates) [按钮]                                       │
│    └─ 当前版本: 1.0.0                                                        │
│  • 评分与评价 (rate_review) [跳转]                                           │
│    └─ 在应用商店中评分                                                       │
│  • 反馈与建议 (feedback) [跳转]                                              │
│    └─ 帮助改进应用                                                           │
│  • 隐私政策 (privacy_policy) [跳转]                                          │
│    └─ 了解数据处理方式                                                         │
└─────────────────────────────────────────────────────────────────────────────┘

╔══════════════════════════════════════════════════════════════════════════════╗
║                          功能统计                                            ║
╚══════════════════════════════════════════════════════════════════════════════╝

总分类数: 8 个主要分类
总功能项: 约 60+ 个设置项

详细统计:
  • 通用设置:        8 项
  • 悬浮球设置:      5 项
  • 灵动岛设置:      9 项
  • 简易模式设置:    3 项
  • 浏览器与搜索:    5 项
  • AI 助手设置:     3 项主设置 + 9 个AI服务 × 2-3 项 = 约 25 项
  • 搜索引擎设置:    3 项
  • 关于:            4 项

特殊功能:
  • 设置搜索功能 (SearchView)
  • 适老化主题支持
  • 左手/右手模式切换
  • 动态显示/隐藏分类 (根据显示模式)

╔══════════════════════════════════════════════════════════════════════════════╗
║                          设置项类型分布                                      ║
╚══════════════════════════════════════════════════════════════════════════════╝

[ListPreference]     列表选择器: 显示模式、主题、操作类型等
[SwitchPreference]   开关: 各种功能的启用/禁用
[SeekBarPreference]  滑动条: 透明度、宽度、位置等数值调整
[EditTextPreference] 文本输入: API密钥、URL等配置
[Preference]         跳转项: 打开其他设置页面或功能
[MultiSelectListPreference] 多选列表: 主菜单显示内容






