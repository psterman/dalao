# 📖 断点续播和投屏功能使用指南

## 🎯 断点续播功能

### 什么是断点续播？
当你观看视频到一半退出时，下次打开同一个视频会自动从上次的位置继续播放，无需手动拖动进度条。

### 如何使用？

#### 1. **自动保存进度**
- 播放视频时，系统会每 10 秒自动保存一次播放进度
- 无需任何手动操作
- 播放进度会保存到本地，不会上传

#### 2. **恢复播放**
- 再次打开同一个视频时
- 如果上次播放进度在 5%~95% 之间
- 会自动显示提示："继续播放: XX:XX"
- 视频会自动跳转到上次的位置并开始播放

#### 3. **查看播放历史**
- 系统会保存最近 100 个视频的播放记录
- 超过 30 天的记录会自动删除
- 播放历史仅保存在本地设备

### 示例场景

```
场景1: 观看长视频
1. 打开一个 1 小时的视频
2. 观看到 30 分钟时退出
3. 第二天再次打开这个视频
4. 系统提示："继续播放: 30:00"
5. 视频自动从 30 分钟处开始播放 ✅

场景2: 视频刚开始
1. 打开视频，只看了 3 秒就退出
2. 再次打开时从头播放（不会续播）
3. 因为播放时间太短 ❌

场景3: 视频快结束
1. 视频播放到 98% 时退出
2. 再次打开时从头播放（不会续播）
3. 因为已经快看完了 ❌
```

---

## 📺 投屏功能

### 什么是投屏？
将手机上的视频投射到电视、Chromecast 等大屏设备上观看。

### 准备工作

#### 1. **设备要求**
- ✅ Chromecast 设备
- ✅ 支持 Google Cast 的智能电视
- ✅ 其他支持 Cast 协议的设备

#### 2. **网络要求**
- 手机和投屏设备必须在同一个 WiFi 网络
- 确保网络连接稳定

### 如何使用？

#### 1. **开始投屏**
1. 打开视频播放器
2. 点击底部控制条的**投屏按钮**（📺 图标）
3. 系统会自动搜索可用的投屏设备
4. 选择要投屏的设备
5. 视频开始在大屏上播放 ✅

#### 2. **投屏按钮状态**
- **白色图标**: 未连接投屏设备
- **黄色图标**: 正在连接投屏设备
- **绿色图标**: 已连接投屏设备

#### 3. **投屏控制**
连接成功后，再次点击投屏按钮会显示控制菜单：

```
┌─────────────────────────┐
│ 投屏到: 客厅电视        │ ← 重新投屏当前视频
├─────────────────────────┤
│ 停止投屏                │ ← 停止播放但保持连接
├─────────────────────────┤
│ 断开连接                │ ← 完全断开投屏
└─────────────────────────┘
```

#### 4. **停止投屏**
- 点击"停止投屏"：停止播放但保持设备连接
- 点击"断开连接"：完全断开投屏设备

### 投屏特性

#### ✅ 智能续播
- 投屏时会从当前播放位置开始
- 例如：视频播放到 5 分钟时投屏，大屏会从 5 分钟开始播放

#### ✅ 元数据传输
- 视频标题会显示在投屏设备上
- 播放进度、时长等信息同步显示

#### ✅ 格式支持
- MP4、WebM、M3U8 等主流格式
- 具体支持格式取决于投屏设备

### 示例场景

```
场景1: 投屏到电视
1. 在手机上打开视频
2. 点击投屏按钮（白色）
3. 选择"客厅电视"
4. 按钮变为黄色（连接中）
5. 连接成功，按钮变为绿色
6. 视频在电视上播放 ✅

场景2: 切换视频
1. 当前正在投屏视频A
2. 打开视频B
3. 点击投屏按钮（绿色）
4. 选择"投屏到: 客厅电视"
5. 视频B开始在电视上播放 ✅

场景3: 停止投屏
1. 视频正在投屏
2. 点击投屏按钮（绿色）
3. 选择"停止投屏"
4. 电视停止播放
5. 按钮仍为绿色（保持连接）
6. 可以快速投屏其他视频 ✅
```

---

## 🎨 控制条按钮说明

```
┌──────────────────────────────────────────────────────┐
│ [▶] [1.0x] [🔁] [⬇] [📤] [📺] [🔇] [📋] [↻]         │
└──────────────────────────────────────────────────────┘
   ↑    ↑     ↑    ↑    ↑    ↑    ↑    ↑   ↑
   │    │     │    │    │    │    │    │   └─ 重启播放
   │    │     │    │    │    │    │    └───── 播放列表
   │    │     │    │    │    │    └────────── 静音/取消静音
   │    │     │    │    │    └─────────────── 投屏 (新功能)
   │    │     │    │    └──────────────────── 分享视频
   │    │     │    └───────────────────────── 下载视频
   │    │     └────────────────────────────── 循环播放
   │    └──────────────────────────────────── 播放速度
   └───────────────────────────────────────── 播放/暂停
```

---

## ⚙️ 设置和管理

### 播放历史管理

#### 查看历史记录
- 播放历史自动保存，无需手动操作
- 最多保存 100 条记录
- 按时间倒序排列（最新的在前）

#### 清理历史记录
- 系统会自动删除 30 天前的记录
- 如需手动清理，可以在设置中操作（未来功能）

### 投屏设置

#### 设备管理
- 系统会自动记住上次连接的设备
- 下次投屏时优先连接该设备

#### 网络切换
- 如果切换了 WiFi 网络
- 需要重新搜索投屏设备
- 确保手机和投屏设备在同一网络

---

## ❓ 常见问题

### 断点续播

**Q: 为什么有些视频不会续播？**
A: 只有播放进度在 5%~95% 之间的视频才会续播。刚开始或快结束的视频会从头播放。

**Q: 播放历史会占用很多空间吗？**
A: 不会。播放历史只保存 URL 和播放位置，每条记录只有几百字节。

**Q: 可以关闭断点续播功能吗？**
A: 目前暂不支持关闭，这是为了提供更好的用户体验。

### 投屏功能

**Q: 找不到投屏设备怎么办？**
A: 
1. 确保手机和投屏设备在同一 WiFi 网络
2. 检查投屏设备是否已开启
3. 重启投屏设备和手机
4. 检查 WiFi 路由器设置，确保允许设备间通信

**Q: 投屏时视频卡顿怎么办？**
A:
1. 检查 WiFi 信号强度
2. 关闭其他占用网络的应用
3. 降低视频清晰度
4. 靠近 WiFi 路由器

**Q: 投屏支持哪些设备？**
A:
- ✅ Google Chromecast
- ✅ 支持 Google Cast 的智能电视
- ✅ Android TV
- ❌ Apple TV（需要 AirPlay，暂不支持）

**Q: 投屏时手机可以做其他事情吗？**
A: 可以！投屏后视频在大屏播放，手机可以正常使用其他应用。

---

## 💡 使用技巧

### 断点续播
1. **长视频必备**: 观看电影、电视剧等长视频时特别有用
2. **多设备同步**: 未来可能支持云端同步，跨设备续播
3. **隐私保护**: 播放历史仅保存在本地，不会上传

### 投屏功能
1. **家庭观影**: 将手机视频投屏到客厅电视，全家一起观看
2. **会议演示**: 投屏到会议室大屏，展示视频内容
3. **省电技巧**: 投屏后可以关闭手机屏幕，节省电量

---

## 🎉 总结

### 断点续播 🎯
- ✅ 自动保存播放进度
- ✅ 智能恢复播放位置
- ✅ 无需手动操作
- ✅ 提升观看体验

### 投屏功能 📺
- ✅ 一键投屏到大屏
- ✅ 支持 Chromecast 等设备
- ✅ 实时状态反馈
- ✅ 灵活控制选项

---

**需要帮助？** 如有问题，请查看详细文档或联系技术支持。

**版本**: v1.0  
**更新日期**: 2025-11-22
