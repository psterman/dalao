# AI档案内联编辑功能测试指南

## 功能概述
本次更新实现了AI档案选择界面的内联编辑功能，用户可以在当前页面直接编辑预设资料的各个选项，无需跳转到其他页面。所有描述都可以通过弹出选项菜单来控制，修改完成后预览会立即显示更新。

## 核心功能

### 1. 内联编辑界面
- **角色描述编辑**：通过弹出菜单选择不同的AI角色
- **沟通风格编辑**：选择AI的沟通方式和语调
- **正式程度编辑**：调整回复的正式程度
- **回复长度编辑**：控制回复的详细程度
- **语言设置编辑**：选择回复语言
- **格式设置编辑**：选择输出格式

### 2. 实时预览更新
- 每次修改选项后，预览内容立即更新
- 预览区域显示完整的AI指令配置
- 支持滚动查看完整内容

### 3. 选项菜单系统
- 每个编辑按钮点击后显示单选列表
- 当前选中项高亮显示
- 支持确定和取消操作

## 测试步骤

### 1. 基础功能测试

#### 1.1 打开内联编辑界面
1. 启动应用
2. 进入简易模式
3. 点击浏览器tab的AI助手按钮
4. 选择"选择AI指令档案"
5. 选择一个档案（非默认档案）

#### 1.2 验证编辑界面显示
**预期结果**：
- 预设资料预览区域显示为"预设资料编辑："
- 显示6个编辑选项：角色描述、沟通风格、正式程度、回复长度、语言、格式
- 每个选项都有对应的按钮，显示当前值
- 底部有实时预览区域

### 2. 角色描述编辑测试

#### 2.1 测试角色描述选择
1. 点击"角色描述"按钮
2. 观察弹出菜单
3. 选择不同的角色选项
4. 点击"确定"

**预期结果**：
- 弹出菜单显示8个角色选项
- 当前选中的角色高亮显示
- 选择后按钮文字更新为选中项
- 预览内容立即更新，显示新的角色描述

#### 2.2 测试角色描述选项
验证以下角色选项是否正常：
- 一个乐于助人的通用AI助手
- 专业的技术顾问
- 友好的客服代表
- 严谨的学术导师
- 创意写作助手
- 数据分析专家
- 编程助手
- 翻译专家

### 3. 沟通风格编辑测试

#### 3.1 测试沟通风格选择
1. 点击"沟通风格"按钮
2. 选择不同的风格选项
3. 观察预览更新

**预期结果**：
- 弹出菜单显示6个风格选项
- 选择后按钮和预览立即更新
- 预览中显示新的沟通风格

#### 3.2 测试沟通风格选项
验证以下风格选项：
- 友好、清晰、简洁
- 专业、严谨、详细
- 轻松、幽默、有趣
- 正式、权威、专业
- 温和、耐心、细致
- 直接、高效、实用

### 4. 正式程度编辑测试

#### 4.1 测试正式程度选择
1. 点击"正式程度"按钮
2. 选择不同的正式程度
3. 观察预览更新

**预期结果**：
- 弹出菜单显示5个正式程度选项
- 选择后预览立即更新
- 预览中显示新的正式程度设置

#### 4.2 测试正式程度选项
验证以下选项：
- 非常正式
- 正式
- 适中
- 非正式
- 非常随意

### 5. 回复长度编辑测试

#### 5.1 测试回复长度选择
1. 点击"回复长度"按钮
2. 选择不同的长度选项
3. 观察预览更新

**预期结果**：
- 弹出菜单显示5个长度选项
- 选择后预览立即更新
- 预览中显示新的回复长度设置

#### 5.2 测试回复长度选项
验证以下选项：
- 非常简短
- 简短
- 适中
- 详细
- 非常详细

### 6. 语言设置编辑测试

#### 6.1 测试语言选择
1. 点击"语言"按钮
2. 选择不同的语言选项
3. 观察预览更新

**预期结果**：
- 弹出菜单显示4个语言选项
- 选择后预览立即更新
- 预览中显示新的语言设置

#### 6.2 测试语言选项
验证以下选项：
- 中文
- English
- 中文+English
- 自动检测

### 7. 格式设置编辑测试

#### 7.1 测试格式选择
1. 点击"格式"按钮
2. 选择不同的格式选项
3. 观察预览更新

**预期结果**：
- 弹出菜单显示4个格式选项
- 选择后预览立即更新
- 预览中显示新的格式设置

#### 7.2 测试格式选项
验证以下选项：
- 使用Markdown格式
- 纯文本格式
- HTML格式
- JSON格式

### 8. 实时预览功能测试

#### 8.1 测试预览更新
1. 修改任意一个选项
2. 观察预览区域的变化
3. 继续修改其他选项
4. 观察每次修改后的预览更新

**预期结果**：
- 每次修改后预览立即更新
- 预览内容包含所有当前设置
- 预览格式正确，包含所有必要的指令

#### 8.2 测试预览内容完整性
验证预览内容包含：
- SYSTEM_RULE 部分
- AI Persona & Role 部分
- Communication Style 部分
- Output & Formatting 部分
- Overriding Custom Instructions 部分

### 9. 综合功能测试

#### 9.1 完整编辑流程测试
1. 选择一个档案
2. 依次修改所有6个选项
3. 观察每次修改后的预览更新
4. 点击"确认"按钮
5. 验证生成的提示词是否正确

**预期结果**：
- 所有修改都能正确保存
- 最终生成的提示词包含所有自定义设置
- 提示词成功插入到搜索输入框

#### 9.2 取消操作测试
1. 修改某个选项
2. 在弹出菜单中点击"取消"
3. 观察按钮文字和预览是否恢复

**预期结果**：
- 取消后按钮文字恢复原值
- 预览内容恢复原状态
- 不保存修改

### 10. 边界情况测试

#### 10.1 快速连续修改测试
1. 快速连续点击不同选项
2. 快速选择不同的值
3. 观察系统响应

**预期结果**：
- 系统响应流畅，无卡顿
- 每次修改都能正确更新
- 预览内容始终正确

#### 10.2 档案切换测试
1. 修改某个档案的选项
2. 切换到另一个档案
3. 再切换回原档案
4. 观察选项是否恢复

**预期结果**：
- 切换档案时选项恢复为档案默认值
- 每个档案的编辑是独立的
- 切换后预览正确更新

## 预期改进效果

### 用户体验提升
- **即时编辑**：无需跳转页面即可编辑预设资料
- **实时预览**：修改后立即看到效果
- **直观操作**：通过按钮和弹出菜单进行编辑
- **快速调整**：可以快速尝试不同的配置组合

### 功能完整性
- **全面编辑**：支持编辑所有主要的AI指令参数
- **选项丰富**：每个参数都有多个预设选项
- **实时反馈**：修改后立即看到预览效果
- **数据持久**：编辑结果会应用到最终生成的提示词

## 测试完成标准

- [ ] 所有6个编辑选项都能正常打开弹出菜单
- [ ] 每个选项的所有预设值都能正确选择
- [ ] 选择后按钮文字和预览内容立即更新
- [ ] 预览内容格式正确，包含所有必要信息
- [ ] 取消操作能正确恢复原状态
- [ ] 档案切换时选项正确重置
- [ ] 最终生成的提示词包含所有自定义设置
- [ ] 界面响应流畅，无卡顿现象
- [ ] 所有边界情况都能正确处理

## 注意事项

1. **性能考虑**：频繁修改选项时系统应保持流畅
2. **数据一致性**：预览内容应与当前选择保持一致
3. **用户体验**：操作应直观易懂，反馈及时
4. **错误处理**：异常情况下应有适当的错误提示
