# DeepSeek API 诊断工具使用指南

## 概述

DeepSeek API 诊断工具是一个专门用于诊断和解决 DeepSeek API 连接问题的工具，特别针对 401 认证错误提供详细的诊断和修复建议。

## 功能特性

### 1. 完整的API诊断
- **API密钥格式检查**：验证密钥格式是否正确
- **网络连接测试**：检查网络连接是否正常
- **API端点测试**：验证API端点是否可访问
- **认证测试**：测试API密钥是否有效
- **模型列表获取**：检查可用的模型列表
- **聊天完成测试**：测试聊天API是否正常工作

### 2. 详细的错误分析
- 针对401错误的特殊处理
- 提供具体的错误原因分析
- 给出针对性的修复建议
- 显示详细的错误响应信息

### 3. 用户友好的界面
- 实时API密钥格式验证
- 进度指示器显示诊断进度
- 可复制的诊断报告
- 一键分享诊断结果

## 使用方法

### 方法一：通过设置界面访问

1. 打开应用设置
2. 进入"AI API设置"
3. 找到"DeepSeek API设置"部分
4. 点击"API密钥"项（会弹出诊断对话框）
5. 选择"开始诊断"

### 方法二：通过聊天界面访问

1. 在与DeepSeek对话时遇到401错误
2. 系统会自动弹出错误对话框
3. 点击"开始诊断"按钮
4. 进入诊断工具进行详细检查

### 方法三：直接启动诊断工具

1. 在诊断工具界面输入API密钥
2. 选择诊断操作：
   - **开始完整诊断**：进行全面检查
   - **测试连接**：快速测试连接状态
   - **获取可用模型**：查看可用的模型列表

## 常见问题及解决方案

### 401 认证错误

**可能原因：**
- API密钥格式错误
- API密钥已过期
- API密钥包含多余的空格或换行符
- 账户余额不足
- API密钥权限不足

**解决方案：**
1. 检查API密钥是否以"sk-"开头
2. 确认API密钥长度至少20个字符
3. 重新生成API密钥
4. 检查DeepSeek账户状态和余额
5. 确认API密钥权限设置

### 网络连接问题

**可能原因：**
- 网络连接不稳定
- 防火墙阻止连接
- DNS解析问题

**解决方案：**
1. 检查网络连接状态
2. 尝试切换网络（WiFi/移动数据）
3. 检查防火墙设置
4. 使用VPN或代理

### API端点问题

**可能原因：**
- API地址配置错误
- 服务器维护或故障

**解决方案：**
1. 确认API地址为：`https://api.deepseek.com/v1/chat/completions`
2. 检查DeepSeek官方状态页面
3. 稍后重试

## 诊断报告说明

诊断工具会生成详细的诊断报告，包含：

1. **API密钥格式检查结果**
2. **网络连接状态**
3. **API端点可访问性**
4. **认证测试结果**
5. **模型列表获取情况**
6. **聊天完成API测试结果**
7. **问题总结和修复建议**

## 支持的模型

诊断工具会测试以下DeepSeek模型：
- `deepseek-chat`
- `deepseek-chat-33b`
- `deepseek-chat-67b`
- `deepseek-coder`
- `deepseek-coder-33b`
- `deepseek-coder-67b`

## 注意事项

1. **API密钥安全**：诊断工具不会保存或传输您的API密钥
2. **网络要求**：需要稳定的网络连接进行诊断
3. **诊断时间**：完整诊断可能需要10-30秒
4. **错误处理**：如果诊断过程出错，会显示具体的错误信息

## 获取帮助

如果诊断工具无法解决您的问题：

1. 查看诊断报告中的详细错误信息
2. 复制诊断报告分享给技术支持
3. 访问DeepSeek官方文档：https://platform.deepseek.com/
4. 联系DeepSeek技术支持

## 更新日志

### v1.0.0
- 初始版本发布
- 支持完整的API诊断功能
- 针对401错误的特殊处理
- 用户友好的诊断界面
